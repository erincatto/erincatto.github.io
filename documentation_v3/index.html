<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Box2D: Overview</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
window.MathJax = {
  options: {
    ignoreHtmlClass: 'tex2jax_ignore',
    processHtmlClass: 'tex2jax_process'
  }
};
</script>
<script type="text/javascript" id="MathJax-script" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="extra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Box2D<span id="projectnumber">&#160;3.0.0</span>
   </div>
   <div id="projectbrief">A 2D physics engine</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Overview </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_overview"></a>Box2D is a 2D rigid body simulation library for games. Programmers can use it in their games to make objects move in realistic ways and make the game world more interactive. From the game engine's point of view, a physics engine is just a system for procedural animation.</p>
<p>Box2D is written in portable C11. Most of the types defined in the engine begin with the b2 prefix. Hopefully this is sufficient to avoid name clashing with your application.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Prerequisites</h1>
<p>In this manual I'll assume you are familiar with basic physics concepts, such as mass, force, torque, and impulses. If not, please first consult Google search and Wikipedia.</p>
<p>Box2D was created as part of a physics tutorial at the Game Developer Conference. You can get these tutorials from the publications section of <a href="https://box2d.org/publications/">box2d.org</a>.</p>
<p>Since Box2D is written in C, you are expected to be experienced in C programming. Box2D should not be your first C programming project! You should be comfortable with compiling, linking, and debugging.</p>
<blockquote class="doxtable">
<p>&zwj;<b>Caution</b>: Box2D should not be your first C project. Please learn C programming, compiling, linking, and debugging before working with Box2D. There are many resources for this online. </p>
</blockquote>
<h1><a class="anchor" id="autotoc_md2"></a>
Scope</h1>
<p>This manual covers the majority of the Box2D API. However, not every aspect is covered. Please look at the Reference section and samples application included with Box2D to learn more.</p>
<p>This manual is only updated with new releases. The latest version of Box2D may be out of sync with this manual.</p>
<h1><a class="anchor" id="autotoc_md3"></a>
Feedback and Bugs</h1>
<p>Please file bugs and feature requests here: <a href="https://github.com/erincatto/box2d/issues">Box2D Issues</a></p>
<p>You can help to ensure your issue gets fixed if you provide sufficient detail. A testbed example that reproduces the problem is ideal. You can read about the testbed later in this document.</p>
<p>There is also a <a href="https://discord.gg/NKYgCBP">Discord server</a> and a <a href="https://reddit.com/r/box2d">subreddit</a> for Box2D.</p>
<h1><a class="anchor" id="autotoc_md4"></a>
Core Concepts</h1>
<p>Box2D works with several fundamental concepts and objects. I briefly define these objects here and more details are given later in this document.</p>
<h2><a class="anchor" id="autotoc_md5"></a>
rigid body</h2>
<p>A chunk of matter that is so strong that the distance between any two bits of matter on the chunk is constant. They are hard like a diamond. In the following discussion I use <em>body</em> interchangeably with rigid body.</p>
<h2><a class="anchor" id="autotoc_md6"></a>
shape</h2>
<p>A shape binds collision geometry to a body and adds material properties such as density, friction, and restitution. A shape puts collision geometry into the collision system (broad-phase) so that it can collide with other shapes.</p>
<h2><a class="anchor" id="autotoc_md7"></a>
constraint</h2>
<p>A constraint is a physical connection that removes degrees of freedom from bodies. A 2D body has 3 degrees of freedom (two translation coordinates and one rotation coordinate). If I take a body and pin it to the wall (like a pendulum) I have constrained the body to the wall. At this point the body can only rotate about the pin, so the constraint has removed 2 degrees of freedom.</p>
<h2><a class="anchor" id="autotoc_md8"></a>
contact constraint</h2>
<p>A special constraint designed to prevent penetration of rigid bodies and to simulate friction and restitution. You do not create contact constraints; they are created automatically by Box2D.</p>
<h2><a class="anchor" id="autotoc_md9"></a>
joint constraint</h2>
<p>This is a constraint used to hold two or more bodies together. Box2D supports several joint types: revolute, prismatic, distance, and more. Joints may have limits, motors, and/or springs.</p>
<h2><a class="anchor" id="autotoc_md10"></a>
joint limit</h2>
<p>A joint limit restricts the range of motion of a joint. For example, the human elbow only allows a certain range of angles.</p>
<h2><a class="anchor" id="autotoc_md11"></a>
joint motor</h2>
<p>A joint motor drives the motion of the connected bodies according to the joint's degrees of freedom. For example, you can use a motor to drive the rotation of an elbow. Motors have a target speed and a maximum force or torque. The simulation will apply the force or torque required to achieve the desired speed.</p>
<h2><a class="anchor" id="autotoc_md12"></a>
joint spring</h2>
<p>A joint spring has a stiffness and damping. In Box2D spring stiffness is expressed in terms or Hertz or cycles per second. This lets you configure how quickly a spring reacts regardless of the body masses. Joint springs also have a damping ratio to let you specify how quickly the spring will come to rest.</p>
<h2><a class="anchor" id="autotoc_md13"></a>
world</h2>
<p>A physics world is a collection of bodies, shapes, joints, and contacts that interact together. Box2D supports the creation of multiple worlds which are completely independent.</p>
<h2><a class="anchor" id="autotoc_md14"></a>
solver</h2>
<p>The physics world has a solver that is used to advance time and to resolve contact and joint constraints. The Box2D solver is a high performance sequential solver that operates in order N time, where N is the number of constraints.</p>
<h2><a class="anchor" id="autotoc_md15"></a>
continuous collision</h2>
<p>The solver advances bodies in time using discrete time steps. Without intervention this can lead to tunneling. <img src="tunneling1.svg" alt="" style="pointer-events: none;" class="inline" title="Tunneling Effect"/>    </p>
<p>Box2D contains specialized algorithms to deal with tunneling. First, the collision algorithms can interpolate the motion of two bodies to find the first time of impact (TOI). Second, speculative collision is used to create contact constraints between bodies before they touch.</p>
<h2><a class="anchor" id="autotoc_md16"></a>
events</h2>
<p>World simulation leads to the creation of events that are available at the end of the time step:</p>
<ul>
<li>body movement events</li>
<li>contact begin and end events</li>
<li>contact hit events</li>
</ul>
<p>These events allow your application to react to changes in the simulation.</p>
<h1><a class="anchor" id="autotoc_md17"></a>
Modules</h1>
<p>Box2D's primary purpose is to provide rigid body simulation. However, there are math and collision features that may be useful apart from the rigid body simulation. These are provided in the <code>include</code> directory. Anything in the <code>include</code> directory is considered public, while everything in the <code>src</code> directory is consider internal.</p>
<p>Public features are supported and you can get help with these on the Discord server. Using internal code directly is not supported.</p>
<h1><a class="anchor" id="autotoc_md18"></a>
Units</h1>
<p>Box2D works with floating point numbers and tolerances have to be used to make Box2D perform well. These tolerances have been tuned to work well with meters-kilogram-second (MKS) units. In particular, Box2D has been tuned to work well with moving shapes between 0.1 and 10 meters. So this means objects between soup cans and buses in size should work well. Static shapes may be up to 50 meters long without trouble. If you have a large world, you should split it up into multiple static bodies.</p>
<p>Being a 2D physics engine, it is tempting to use pixels as your units. Unfortunately this will lead to a poor simulation and possibly weird behavior. An object of length 200 pixels would be seen by Box2D as the size of a 45 story building.</p>
<blockquote class="doxtable">
<p>&zwj;<b>Caution</b>: Box2D is tuned for MKS units. Keep the size of moving objects larger than 1cm. You'll need to use some scaling system when you render your environment and actors. The Box2D samples application does this by using an OpenGL viewport transform. Do not use pixel units unless you understand the implications. </p>
</blockquote>
<p>It is best to think of Box2D bodies as moving billboards upon which you attach your artwork. The billboard may move in a unit system of meters, but you can convert that to pixel coordinates with a simple scaling factor. You can then use those pixel coordinates to place your sprites, etc. You can also account for flipped coordinate axes.</p>
<p>Another limitation to consider is overall world size. If your world units become larger than 12 kilometers or so, then the lost precision can affect stability.</p>
<blockquote class="doxtable">
<p>&zwj;<b>Caution</b>: Box2D works best with world sizes less than 12 kilometers. If you are careful with your simulation tuning, this can be pushed up to around 24 kilometers, which is much larger than most game worlds. </p>
</blockquote>
<p>Box2D uses radians for angles. The body rotation is stored a complex number, so when you access the angle of a body, it will be between \(-\pi\) and \(\pi\) radians.</p>
<blockquote class="doxtable">
<p>&zwj;<b>Caution</b>: Box2D uses radians, not degrees. </p>
</blockquote>
<h1><a class="anchor" id="autotoc_md19"></a>
Changing the length units</h1>
<p>Advanced users may change the length unit by calling <code><a class="el" href="group__math.html#ga654e6f942a5d2abee54b6bba4176b15b" title="Box2D bases all length units on meters, but you may need different units for your game.">b2SetLengthUnitsPerMeter()</a></code> at application startup. If you keep Box2D in a shared library, you will need to call this if the shared library is reloaded.</p>
<p>If you change the length units to pixels you will need to decide how many pixels represent a meter. You will also need to figure out reasonable values for gravity, density, force, and torque. One of the benefits of using MKS units for physics simulation is that you can use real world values to get reasonable results.</p>
<p>It is also harder to get support for using Box2D if you change the unit system, because values are harder to communicate and may become non-intuitive.</p>
<h1><a class="anchor" id="autotoc_md20"></a>
Ids and Definitions</h1>
<p>Fast memory management plays a central role in the design of the Box2D interface. When you create a world, body, shape or joint, you will receive a handle called an <em>id</em>. These ids are opaque and are passed to various functions to access the underlying data.</p>
<p>These ids provide some safety. If you use an id after it has been freed you will usually get an assertion. All ids support 64k generations of safety. All ids also have a corresponding function you can call to check if it is valid.</p>
<p>When you create a world, body, shape, or joint, you need to provide a definition structure. These definitions contain all the information needed to build the Box2D object. By using this approach I can prevent construction errors, keep the number of function parameters small, provide sensible defaults, and reduce the number of accessors.</p>
<p>Here is an example of body creation:</p>
<div class="fragment"><div class="line"><a class="code hl_struct" href="group__body.html#structb2_body_def">b2BodyDef</a> bodyDef = <a class="code hl_function" href="group__body.html#ga8f9e64b598f7e50a646fe29a55189441">b2DefaultBodyDef</a>();</div>
<div class="line">bodyDef.<a class="code hl_variable" href="group__body.html#a680cadc09ad6cf4b3366cbf0914c648b">position</a> = (<a class="code hl_struct" href="group__math.html#structb2_vec2">b2Vec2</a>){10.0f, 5.0f};</div>
<div class="line"><a class="code hl_struct" href="group__id.html#structb2_body_id">b2BodyId</a> myBodyId = <a class="code hl_function" href="group__body.html#gae508148d6b854188a14075edd90c7777">b2CreateBody</a>(myWorldId, &amp;bodyDef);</div>
<div class="ttc" id="agroup__body_html_a680cadc09ad6cf4b3366cbf0914c648b"><div class="ttname"><a href="group__body.html#a680cadc09ad6cf4b3366cbf0914c648b">b2BodyDef::position</a></div><div class="ttdeci">b2Vec2 position</div><div class="ttdoc">The initial world position of the body.</div><div class="ttdef"><b>Definition</b> types.h:147</div></div>
<div class="ttc" id="agroup__body_html_ga8f9e64b598f7e50a646fe29a55189441"><div class="ttname"><a href="group__body.html#ga8f9e64b598f7e50a646fe29a55189441">b2DefaultBodyDef</a></div><div class="ttdeci">b2BodyDef b2DefaultBodyDef()</div><div class="ttdoc">Use this to initialize your body definition.</div></div>
<div class="ttc" id="agroup__body_html_gae508148d6b854188a14075edd90c7777"><div class="ttname"><a href="group__body.html#gae508148d6b854188a14075edd90c7777">b2CreateBody</a></div><div class="ttdeci">b2BodyId b2CreateBody(b2WorldId worldId, const b2BodyDef *def)</div><div class="ttdoc">Create a rigid body given a definition.</div></div>
<div class="ttc" id="agroup__body_html_structb2_body_def"><div class="ttname"><a href="group__body.html#structb2_body_def">b2BodyDef</a></div><div class="ttdoc">A body definition holds all the data needed to construct a rigid body.</div><div class="ttdef"><b>Definition</b> types.h:140</div></div>
<div class="ttc" id="agroup__id_html_structb2_body_id"><div class="ttname"><a href="group__id.html#structb2_body_id">b2BodyId</a></div><div class="ttdoc">Body id references a body instance. This should be treated as an opaque handle.</div><div class="ttdef"><b>Definition</b> id.h:44</div></div>
<div class="ttc" id="agroup__math_html_structb2_vec2"><div class="ttname"><a href="group__math.html#structb2_vec2">b2Vec2</a></div><div class="ttdoc">2D vector This can be used to represent a point or free vector</div><div class="ttdef"><b>Definition</b> math_functions.h:23</div></div>
</div><!-- fragment --><p>Notice the body definition is initialize by calling <code><a class="el" href="group__body.html#ga8f9e64b598f7e50a646fe29a55189441" title="Use this to initialize your body definition.">b2DefaultBodyDef()</a></code>. This is needed because C does not have constructors and zero initialization is not suitable for the definitions used in Box2D.</p>
<p>Also notice that the body definition is a temporary object that is fully copied into the internal body data structures. Definitions should usually be created on the stack as temporaries.</p>
<p>This is how a body is destroyed:</p>
<div class="fragment"><div class="line"><a class="code hl_function" href="group__body.html#gafb3d7909c4d311ffb858405a50b0c4a5">b2DestroyBody</a>(myBodyId);</div>
<div class="line">myBodyId = b2_nullBodyId;</div>
<div class="ttc" id="agroup__body_html_gafb3d7909c4d311ffb858405a50b0c4a5"><div class="ttname"><a href="group__body.html#gafb3d7909c4d311ffb858405a50b0c4a5">b2DestroyBody</a></div><div class="ttdeci">void b2DestroyBody(b2BodyId bodyId)</div><div class="ttdoc">Destroy a rigid body given an id.</div></div>
</div><!-- fragment --><p>Notice that the body id is set to null using the constant <code>b2_nullBodyId</code>. You should treat ids as opaque data, however you may zero initialize all Box2D ids and they will be considered <em>null</em>.</p>
<p>Shapes are created in a similar way. For example, here is how a box shape is created:</p>
<div class="fragment"><div class="line"><a class="code hl_struct" href="group__shape.html#structb2_shape_def">b2ShapeDef</a> shapeDef = <a class="code hl_function" href="group__shape.html#ga379508d71c631c83e151415d3683621a">b2DefaultShapeDef</a>();</div>
<div class="line">shapeDef.<a class="code hl_variable" href="group__shape.html#a602ce17ce0d85dbfb079857e2f95e307">friction</a> = 0.42f;</div>
<div class="line"><a class="code hl_struct" href="group__geometry.html#structb2_polygon">b2Polygon</a> box = b2MakeBody(0.5f, 0.25f);</div>
<div class="line"><a class="code hl_struct" href="group__id.html#structb2_shape_id">b2ShapeId</a> myShapeId = <a class="code hl_function" href="group__shape.html#ga42fda37085eeb19bbdf532f06ef3421c">b2CreateCircleShape</a>(myBodyId, &amp;shapeDef, &amp;box);</div>
<div class="ttc" id="agroup__geometry_html_structb2_polygon"><div class="ttname"><a href="group__geometry.html#structb2_polygon">b2Polygon</a></div><div class="ttdoc">A solid convex polygon.</div><div class="ttdef"><b>Definition</b> collision.h:129</div></div>
<div class="ttc" id="agroup__id_html_structb2_shape_id"><div class="ttname"><a href="group__id.html#structb2_shape_id">b2ShapeId</a></div><div class="ttdoc">Shape id references a shape instance. This should be treated as an opaque handle.</div><div class="ttdef"><b>Definition</b> id.h:52</div></div>
<div class="ttc" id="agroup__shape_html_a602ce17ce0d85dbfb079857e2f95e307"><div class="ttname"><a href="group__shape.html#a602ce17ce0d85dbfb079857e2f95e307">b2ShapeDef::friction</a></div><div class="ttdeci">float friction</div><div class="ttdoc">The Coulomb (dry) friction coefficient, usually in the range [0,1].</div><div class="ttdef"><b>Definition</b> types.h:303</div></div>
<div class="ttc" id="agroup__shape_html_ga379508d71c631c83e151415d3683621a"><div class="ttname"><a href="group__shape.html#ga379508d71c631c83e151415d3683621a">b2DefaultShapeDef</a></div><div class="ttdeci">b2ShapeDef b2DefaultShapeDef()</div><div class="ttdoc">Use this to initialize your shape definition.</div></div>
<div class="ttc" id="agroup__shape_html_ga42fda37085eeb19bbdf532f06ef3421c"><div class="ttname"><a href="group__shape.html#ga42fda37085eeb19bbdf532f06ef3421c">b2CreateCircleShape</a></div><div class="ttdeci">b2ShapeId b2CreateCircleShape(b2BodyId bodyId, const b2ShapeDef *def, const b2Circle *circle)</div><div class="ttdoc">Create a circle shape and attach it to a body.</div></div>
<div class="ttc" id="agroup__shape_html_structb2_shape_def"><div class="ttname"><a href="group__shape.html#structb2_shape_def">b2ShapeDef</a></div><div class="ttdoc">Used to create a shape.</div><div class="ttdef"><b>Definition</b> types.h:298</div></div>
</div><!-- fragment --><p>And the shape may be destroyed as follows:</p>
<div class="fragment"><div class="line"><a class="code hl_function" href="group__shape.html#ga6662fdaad229f3e4fa18d90c3f997928">b2DestroyShape</a>(myShapeId);</div>
<div class="line">myShapeId = b2_nullShapeId;</div>
<div class="ttc" id="agroup__shape_html_ga6662fdaad229f3e4fa18d90c3f997928"><div class="ttname"><a href="group__shape.html#ga6662fdaad229f3e4fa18d90c3f997928">b2DestroyShape</a></div><div class="ttdeci">void b2DestroyShape(b2ShapeId shapeId)</div><div class="ttdoc">Destroy a shape.</div></div>
</div><!-- fragment --><p>For convenience, Box2D will destroy all shapes on a body when the body is destroyed. Therefore, you may not need to store the shape id. </p>
</div></div><!-- PageDoc -->
<a href="doxygen_crawl.html"/>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
