<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>box2d: Overview (NOT UPDATED for Box2D version 3.0)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="extra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo.svg"/></td>
  <td id="projectalign">
   <div id="projectname">box2d<span id="projectnumber">&#160;3.0.0</span>
   </div>
   <div id="projectbrief">A 2D physics engine for games</div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Overview (NOT UPDATED for Box2D version 3.0) </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_overview"></a>Box2D is a 2D rigid body simulation library for games. Programmers can use it in their games to make objects move in realistic ways and make the game world more interactive. From the game engine's point of view, a physics engine is just a system for procedural animation.</p>
<p>Box2D is written in portable C++. Most of the types defined in the engine begin with the b2 prefix. Hopefully this is sufficient to avoid name clashing with your game engine.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Prerequisites</h1>
<p>In this manual I'll assume you are familiar with basic physics concepts, such as mass, force, torque, and impulses. If not, please first consult Google search and Wikipedia.</p>
<p>Box2D was created as part of a physics tutorial at the Game Developer Conference. You can get these tutorials from the download section of box2d.org.</p>
<p>Since Box2D is written in C++, you are expected to be experienced in C++ programming. Box2D should not be your first C++ programming project! You should be comfortable with compiling, linking, and debugging.</p>
<blockquote class="doxtable">
<p>&zwj;<b>Caution</b>: Box2D should not be your first C++ project. Please learn C++ programming, compiling, linking, and debugging before working with Box2D. There are many resources for this on the net. </p>
</blockquote>
<h1><a class="anchor" id="autotoc_md2"></a>
Scope</h1>
<p>This manual covers the majority of the Box2D API. However, not every aspect is covered. Please look at the testbed included with Box2D to learn more.</p>
<p>This manual is only updated with new releases. The latest version of Box2D may be out of sync with this manual.</p>
<h1><a class="anchor" id="autotoc_md3"></a>
Feedback and Bugs</h1>
<p>Please file bugs and feature requests here: <a href="https://github.com/erincatto/box2d/issues">Box2D Issues</a></p>
<p>You can help to ensure your issue gets fixed if you provide sufficient detail. A testbed example that reproduces the problem is ideal. You can read about the testbed later in this document.</p>
<p>There is also a <a href="https://discord.gg/NKYgCBP">Discord server</a> and a <a href="https://reddit.com/r/box2d">subreddit</a> for Box2D.</p>
<h1><a class="anchor" id="autotoc_md4"></a>
Core Concepts</h1>
<p>Box2D works with several fundamental concepts and objects. We briefly define these objects here and more details are given later in this document.</p>
<h2><a class="anchor" id="autotoc_md5"></a>
shape</h2>
<p>A shape is 2D geometrical object, such as a circle or polygon.</p>
<h2><a class="anchor" id="autotoc_md6"></a>
rigid body</h2>
<p>A chunk of matter that is so strong that the distance between any two bits of matter on the chunk is constant. They are hard like a diamond. In the following discussion we use body interchangeably with rigid body.</p>
<h2><a class="anchor" id="autotoc_md7"></a>
fixture</h2>
<p>A fixture binds a shape to a body and adds material properties such as density, friction, and restitution. A fixture puts a shape into the collision system (broad-phase) so that it can collide with other shapes.</p>
<h2><a class="anchor" id="autotoc_md8"></a>
constraint</h2>
<p>A constraint is a physical connection that removes degrees of freedom from bodies. A 2D body has 3 degrees of freedom (two translation coordinates and one rotation coordinate). If we take a body and pin it to the wall (like a pendulum) we have constrained the body to the wall. At this point the body can only rotate about the pin, so the constraint has removed 2 degrees of freedom.</p>
<h2><a class="anchor" id="autotoc_md9"></a>
contact constraint</h2>
<p>A special constraint designed to prevent penetration of rigid bodies and to simulate friction and restitution. You do not create contact constraints; they are created automatically by Box2D.</p>
<h2><a class="anchor" id="autotoc_md10"></a>
joint</h2>
<p>This is a constraint used to hold two or more bodies together. Box2D supports several joint types: revolute, prismatic, distance, and more. Some joints may have limits and motors.</p>
<h2><a class="anchor" id="autotoc_md11"></a>
joint limit</h2>
<p>A joint limit restricts the range of motion of a joint. For example, the human elbow only allows a certain range of angles.</p>
<h2><a class="anchor" id="autotoc_md12"></a>
joint motor</h2>
<p>A joint motor drives the motion of the connected bodies according to the joint's degrees of freedom. For example, you can use a motor to drive the rotation of an elbow.</p>
<h2><a class="anchor" id="autotoc_md13"></a>
world</h2>
<p>A physics world is a collection of bodies, fixtures, and constraints that interact together. Box2D supports the creation of multiple worlds, but this is usually not necessary or desirable.</p>
<h2><a class="anchor" id="autotoc_md14"></a>
solver</h2>
<p>The physics world has a solver that is used to advance time and to resolve contact and joint constraints. The Box2D solver is a high performance iterative solver that operates in order N time, where N is the number of constraints.</p>
<h2><a class="anchor" id="autotoc_md15"></a>
continuous collision</h2>
<p>The solver advances bodies in time using discrete time steps. Without intervention this can lead to tunneling. <img src="tunneling1.svg" alt="" style="pointer-events: none;" class="inline" title="Tunneling Effect"/>    </p>
<p>Box2D contains specialized algorithms to deal with tunneling. First, the collision algorithms can interpolate the motion of two bodies to find the first time of impact (TOI). Second, there is a sub-stepping solver that moves bodies to their first time of impact and then resolves the collision.</p>
<h1><a class="anchor" id="autotoc_md16"></a>
Modules</h1>
<p>Box2D is composed of three modules: Common, Collision, and Dynamics. The Common module has code for allocation, math, and settings. The Collision module defines shapes, a broad-phase, and collision functions/queries. Finally the Dynamics module provides the simulation world, bodies, fixtures, and joints. <img src="modules.svg" alt="" style="pointer-events: none;" class="inline" title="Box2D Modules"/>    </p>
<h1><a class="anchor" id="autotoc_md17"></a>
Units</h1>
<p>Box2D works with floating point numbers and tolerances have to be used to make Box2D perform well. These tolerances have been tuned to work well with meters-kilogram-second (MKS) units. In particular, Box2D has been tuned to work well with moving shapes between 0.1 and 10 meters. So this means objects between soup cans and buses in size should work well. Static shapes may be up to 50 meters long without trouble.</p>
<p>Being a 2D physics engine, it is tempting to use pixels as your units. Unfortunately this will lead to a poor simulation and possibly weird behavior. An object of length 200 pixels would be seen by Box2D as the size of a 45 story building.</p>
<blockquote class="doxtable">
<p>&zwj;<b>Caution</b>: Box2D is tuned for MKS units. Keep the size of moving objects roughly between 0.1 and 10 meters. You'll need to use some scaling system when you render your environment and actors. The Box2D testbed does this by using an OpenGL viewport transform. DO NOT USE PIXELS. </p>
</blockquote>
<p>It is best to think of Box2D bodies as moving billboards upon which you attach your artwork. The billboard may move in a unit system of meters, but you can convert that to pixel coordinates with a simple scaling factor. You can then use those pixel coordinates to place your sprites, etc. You can also account for flipped coordinate axes.</p>
<p>Another limitation to consider is overall world size. If your world units become larger than 2 kilometers or so, then the lost precision can affect stability.</p>
<blockquote class="doxtable">
<p>&zwj;<b>Caution</b>: Box2D works best with world sizes less than 2 kilometers. Use b2World::ShiftOrigin to support larger worlds. </p>
</blockquote>
<p>If you need to have a larger game world, consider using b2World::ShiftOrigin to keep the world origin close to your player. I recommend to use grid lines along with some hysteresis for triggering calls to ShiftOrigin. This call should be made infrequently because it is has CPU cost. You may need to store a physics offset when translating between game units and Box2D units.</p>
<p>Box2D uses radians for angles. The body rotation is stored in radians and may grow unbounded. Consider normalizing the angle of your bodies if the magnitude of the angle becomes too large (use <code>b2Body::SetTransform</code>).</p>
<blockquote class="doxtable">
<p>&zwj;<b>Caution</b>: Box2D uses radians, not degrees. </p>
</blockquote>
<h1><a class="anchor" id="autotoc_md18"></a>
Changing the length units</h1>
<p>Advanced users may change the length unit modifying <code>b2_lengthUnitsPerMeter</code>. You can avoid merge conflicts by defining <code>B2_USER_SETTINGS</code> and providing <code>b2_user_settings.h</code>. See the file <code>b2_settings.h</code> for details.</p>
<h1><a class="anchor" id="autotoc_md19"></a>
Factories and Definitions</h1>
<p>Fast memory management plays a central role in the design of the Box2D API. So when you create a b2Body or a b2Joint, you need to call the factory functions on b2World. You should never try to allocate these types in another manner.</p>
<p>There are creation functions:</p>
<div class="fragment"><div class="line">b2Body* b2World::CreateBody(<span class="keyword">const</span> <a class="code hl_struct" href="types_8h.html#structb2_body_def">b2BodyDef</a>* def)</div>
<div class="line">b2Joint* b2World::CreateJoint(<span class="keyword">const</span> b2JointDef* def)</div>
<div class="ttc" id="atypes_8h_html_structb2_body_def"><div class="ttname"><a href="types_8h.html#structb2_body_def">b2BodyDef</a></div><div class="ttdef"><b>Definition</b> types.h:201</div></div>
</div><!-- fragment --><p>And there are corresponding destruction functions:</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> b2World::DestroyBody(b2Body* body)</div>
<div class="line"><span class="keywordtype">void</span> b2World::DestroyJoint(b2Joint* joint)</div>
</div><!-- fragment --><p>When you create a body or joint, you need to provide a definition. These definitions contain all the information needed to build the body or joint. By using this approach we can prevent construction errors, keep the number of function parameters small, provide sensible defaults, and reduce the number of accessors.</p>
<p>Since fixtures (shapes) must be parented to a body, they are created and destroyed using a factory method on b2Body:</p>
<div class="fragment"><div class="line">b2Fixture* b2Body::CreateFixture(<span class="keyword">const</span> b2FixtureDef* def)</div>
<div class="line"><span class="keywordtype">void</span> b2Body::DestroyFixture(b2Fixture* fixture)</div>
</div><!-- fragment --><p>There is also shortcut to create a fixture directly from the shape and density.</p>
<div class="fragment"><div class="line">b2Fixture* b2Body::CreateFixture(<span class="keyword">const</span> b2Shape* shape, <span class="keywordtype">float</span> density)</div>
</div><!-- fragment --><p>Factories do not retain references to the definitions. So you can create definitions on the stack and keep them in temporary resources. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
