<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Box2D: Hello Box2D</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
window.MathJax = {
  options: {
    ignoreHtmlClass: 'tex2jax_ignore',
    processHtmlClass: 'tex2jax_process'
  }
};
</script>
<script type="text/javascript" id="MathJax-script" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="extra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Box2D<span id="projectnumber">&#160;3.0.0</span>
   </div>
   <div id="projectbrief">A 2D physics engine for games</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('hello.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Hello Box2D</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_hello"></a>In the distribution of Box2D is a Hello World unit test written in C. The test creates a large ground box and a small dynamic box. This code does not contain any graphics. All you will see is text output in the console of the box's position over time.</p>
<p>This is a good example of how to get up and running with Box2D.</p>
<h1><a class="anchor" id="autotoc_md21"></a>
Creating a World</h1>
<p>Every Box2D program begins with the creation of a world object. The world is the physics hub that manages memory, objects, and simulation. The world is represented by an opaque handle called <code><a class="el" href="group__id.html#structb2_world_id" title="World id references a world instance. This should be treated as an opaque handle.">b2WorldId</a></code>.</p>
<p>It is easy to create a Box2D world. First, I create the world definition:</p>
<div class="fragment"><div class="line"><a class="code hl_struct" href="group__world.html#structb2_world_def">b2WorldDef</a> worldDef = <a class="code hl_function" href="group__world.html#ga48e3bd8a4d6a1f199cbb77212769656b">b2DefaultWorldDef</a>();</div>
<div class="ttc" id="agroup__world_html_ga48e3bd8a4d6a1f199cbb77212769656b"><div class="ttname"><a href="group__world.html#ga48e3bd8a4d6a1f199cbb77212769656b">b2DefaultWorldDef</a></div><div class="ttdeci">b2WorldDef b2DefaultWorldDef()</div><div class="ttdoc">Use this to initialize your world definition.</div></div>
<div class="ttc" id="agroup__world_html_structb2_world_def"><div class="ttname"><a href="group__world.html#structb2_world_def">b2WorldDef</a></div><div class="ttdoc">World definition used to create a simulation world.</div><div class="ttdef"><b>Definition</b> types.h:65</div></div>
</div><!-- fragment --><p>The world definition is a temporary object that you can create on the stack. The function <code><a class="el" href="group__world.html#ga48e3bd8a4d6a1f199cbb77212769656b" title="Use this to initialize your world definition.">b2DefaultWorldDef()</a></code> populates the world definition with default values. This is necessary because C does not have constructors and zero initialization is not appropriate for <code><a class="el" href="group__world.html#structb2_world_def" title="World definition used to create a simulation world.">b2WorldDef</a></code>.</p>
<p>Now I configure the world gravity vector. Note that Box2D has no concept of <em>up</em> and you may point gravity in any direction you like. Box2D example code uses the positive y-axis as the up direction.</p>
<div class="fragment"><div class="line">worldDef.<a class="code hl_variable" href="group__world.html#a9152b6fd416622e7f00ba0bac86508dd">gravity</a> = (<a class="code hl_struct" href="group__math.html#structb2_vec2">b2Vec2</a>){0.0f, -10.0f};</div>
<div class="ttc" id="agroup__math_html_structb2_vec2"><div class="ttname"><a href="group__math.html#structb2_vec2">b2Vec2</a></div><div class="ttdoc">2D vector This can be used to represent a point or free vector</div><div class="ttdef"><b>Definition</b> math_functions.h:23</div></div>
<div class="ttc" id="agroup__world_html_a9152b6fd416622e7f00ba0bac86508dd"><div class="ttname"><a href="group__world.html#a9152b6fd416622e7f00ba0bac86508dd">b2WorldDef::gravity</a></div><div class="ttdeci">b2Vec2 gravity</div><div class="ttdoc">Gravity vector. Box2D has no up-vector defined.</div><div class="ttdef"><b>Definition</b> types.h:67</div></div>
</div><!-- fragment --><p>Now I create the world object.</p>
<div class="fragment"><div class="line"><a class="code hl_struct" href="group__id.html#structb2_world_id">b2WorldId</a> worldId = <a class="code hl_function" href="group__world.html#ga47d081b90cf21396822f148e06598af0">b2CreateWorld</a>(&amp;worldDef);</div>
<div class="ttc" id="agroup__id_html_structb2_world_id"><div class="ttname"><a href="group__id.html#structb2_world_id">b2WorldId</a></div><div class="ttdoc">World id references a world instance. This should be treated as an opaque handle.</div><div class="ttdef"><b>Definition</b> id.h:37</div></div>
<div class="ttc" id="agroup__world_html_ga47d081b90cf21396822f148e06598af0"><div class="ttname"><a href="group__world.html#ga47d081b90cf21396822f148e06598af0">b2CreateWorld</a></div><div class="ttdeci">b2WorldId b2CreateWorld(const b2WorldDef *def)</div><div class="ttdoc">Create a world for rigid body simulation.</div></div>
</div><!-- fragment --><p>The world creation copies all the data it needs out of the world definition, so the world definition is no longer needed.</p>
<p>So now we have our physics world, let's start adding some stuff to it.</p>
<h1><a class="anchor" id="autotoc_md22"></a>
Creating a Ground Box</h1>
<p>Bodies are built using the following steps:</p><ol type="1">
<li>Define a body with position, damping, etc.</li>
<li>Use the world id to create the body.</li>
<li>Define shapes with friction, density, etc.</li>
<li>Create shapes on the body.</li>
</ol>
<p>For step 1 I create the ground body. For this I need a body definition. With the body definition I specify the initial position of the ground body.</p>
<div class="fragment"><div class="line"><a class="code hl_struct" href="group__body.html#structb2_body_def">b2BodyDef</a> groundBodyDef = <a class="code hl_function" href="group__body.html#ga8f9e64b598f7e50a646fe29a55189441">b2DefaultBodyDef</a>();</div>
<div class="line">groundBodyDef.<a class="code hl_variable" href="group__body.html#a680cadc09ad6cf4b3366cbf0914c648b">position</a> = (<a class="code hl_struct" href="group__math.html#structb2_vec2">b2Vec2</a>){0.0f, -10.0f};</div>
<div class="ttc" id="agroup__body_html_a680cadc09ad6cf4b3366cbf0914c648b"><div class="ttname"><a href="group__body.html#a680cadc09ad6cf4b3366cbf0914c648b">b2BodyDef::position</a></div><div class="ttdeci">b2Vec2 position</div><div class="ttdoc">The initial world position of the body.</div><div class="ttdef"><b>Definition</b> types.h:150</div></div>
<div class="ttc" id="agroup__body_html_ga8f9e64b598f7e50a646fe29a55189441"><div class="ttname"><a href="group__body.html#ga8f9e64b598f7e50a646fe29a55189441">b2DefaultBodyDef</a></div><div class="ttdeci">b2BodyDef b2DefaultBodyDef()</div><div class="ttdoc">Use this to initialize your body definition.</div></div>
<div class="ttc" id="agroup__body_html_structb2_body_def"><div class="ttname"><a href="group__body.html#structb2_body_def">b2BodyDef</a></div><div class="ttdoc">A body definition holds all the data needed to construct a rigid body.</div><div class="ttdef"><b>Definition</b> types.h:143</div></div>
</div><!-- fragment --><p>For step 2 the body definition and the world id are used to create the ground body. Again, the definition is fully copied and may leave scope after the body is created. Bodies are static by default. Static bodies don't collide with other static bodies and are immovable by the simulation.</p>
<div class="fragment"><div class="line"><a class="code hl_struct" href="group__id.html#structb2_body_id">b2BodyId</a> groundId = <a class="code hl_function" href="group__body.html#gae508148d6b854188a14075edd90c7777">b2CreateBody</a>(worldId, &amp;groundBodyDef);</div>
<div class="ttc" id="agroup__body_html_gae508148d6b854188a14075edd90c7777"><div class="ttname"><a href="group__body.html#gae508148d6b854188a14075edd90c7777">b2CreateBody</a></div><div class="ttdeci">b2BodyId b2CreateBody(b2WorldId worldId, const b2BodyDef *def)</div><div class="ttdoc">Create a rigid body given a definition.</div></div>
<div class="ttc" id="agroup__id_html_structb2_body_id"><div class="ttname"><a href="group__id.html#structb2_body_id">b2BodyId</a></div><div class="ttdoc">Body id references a body instance. This should be treated as an opaque handle.</div><div class="ttdef"><b>Definition</b> id.h:44</div></div>
</div><!-- fragment --><p>Notice that <code>worldId</code> is passed by value. Ids are small structures that should be passed by value.</p>
<p>For step 3 I create a ground polygon. I use the <code><a class="el" href="group__geometry.html#ga9f61df106f05be28e4c66c83a00a0372" title="Make a box (rectangle) polygon, bypassing the need for a convex hull.">b2MakeBox()</a></code> helper function to form the ground polygon into a box shape, with the box centered on the origin of the parent body.</p>
<div class="fragment"><div class="line"><a class="code hl_struct" href="group__geometry.html#structb2_polygon">b2Polygon</a> groundBox = <a class="code hl_function" href="group__geometry.html#ga9f61df106f05be28e4c66c83a00a0372">b2MakeBox</a>(50.0f, 10.0f);</div>
<div class="ttc" id="agroup__geometry_html_ga9f61df106f05be28e4c66c83a00a0372"><div class="ttname"><a href="group__geometry.html#ga9f61df106f05be28e4c66c83a00a0372">b2MakeBox</a></div><div class="ttdeci">b2Polygon b2MakeBox(float hx, float hy)</div><div class="ttdoc">Make a box (rectangle) polygon, bypassing the need for a convex hull.</div></div>
<div class="ttc" id="agroup__geometry_html_structb2_polygon"><div class="ttname"><a href="group__geometry.html#structb2_polygon">b2Polygon</a></div><div class="ttdoc">A solid convex polygon.</div><div class="ttdef"><b>Definition</b> collision.h:129</div></div>
</div><!-- fragment --><p>The <code><a class="el" href="group__geometry.html#ga9f61df106f05be28e4c66c83a00a0372" title="Make a box (rectangle) polygon, bypassing the need for a convex hull.">b2MakeBox()</a></code> function takes the <b>half-width</b> and <b>half-height</b> (extents). So in this case the ground box is 100 units wide (x-axis) and 20 units tall (y-axis). Box2D is tuned for meters, kilograms, and seconds. So you can consider the extents to be in meters. Box2D generally works best when objects are the size of typical real world objects. For example, a barrel is about 1 meter tall. Due to the limitations of floating point arithmetic, using Box2D to model the movement of glaciers or dust particles is not a good idea.</p>
<p>I'll finish the ground body in step 4 by creating the shape. For this step I need to create a shape definition which works fine with the default value.</p>
<div class="fragment"><div class="line"><a class="code hl_struct" href="group__shape.html#structb2_shape_def">b2ShapeDef</a> groundShapeDef = <a class="code hl_function" href="group__shape.html#ga379508d71c631c83e151415d3683621a">b2DefaultShapeDef</a>();</div>
<div class="line"><a class="code hl_function" href="group__shape.html#gaad57080193c9c0790857e9d12e56c5ba">b2CreatePolygonShape</a>(groundId, &amp;groundShapeDef, &amp;groundBox);</div>
<div class="ttc" id="agroup__shape_html_ga379508d71c631c83e151415d3683621a"><div class="ttname"><a href="group__shape.html#ga379508d71c631c83e151415d3683621a">b2DefaultShapeDef</a></div><div class="ttdeci">b2ShapeDef b2DefaultShapeDef()</div><div class="ttdoc">Use this to initialize your shape definition.</div></div>
<div class="ttc" id="agroup__shape_html_gaad57080193c9c0790857e9d12e56c5ba"><div class="ttname"><a href="group__shape.html#gaad57080193c9c0790857e9d12e56c5ba">b2CreatePolygonShape</a></div><div class="ttdeci">b2ShapeId b2CreatePolygonShape(b2BodyId bodyId, const b2ShapeDef *def, const b2Polygon *polygon)</div><div class="ttdoc">Create a polygon shape and attach it to a body.</div></div>
<div class="ttc" id="agroup__shape_html_structb2_shape_def"><div class="ttname"><a href="group__shape.html#structb2_shape_def">b2ShapeDef</a></div><div class="ttdoc">Used to create a shape.</div><div class="ttdef"><b>Definition</b> types.h:301</div></div>
</div><!-- fragment --><p>Box2D does not keep a reference to the shape data. It copies the data into the internal data structures.</p>
<p>Note that every shape must have a parent body, even shapes that are static. You may attach multiple shapes to a single parent body.</p>
<p>When you attach a shape, the shape's coordinates become local to the body. So when the body moves, so does the shape. A shape's world transform is inherited from the parent body. A shape does not have a transform independent of the body. So we don't move a shape around on the body. Moving or modifying a shape that is on a body is possible with certain functions, but it should not be part of normal simulation. The reason is simple: a body with morphing shapes is not a rigid body, but Box2D is a rigid body engine. Many of the algorithms in Box2D are based on the rigid body model. If this is violated you may get unexpected behavior.</p>
<h1><a class="anchor" id="autotoc_md23"></a>
Creating a Dynamic Body</h1>
<p>I can use the same technique to create a dynamic body. The main difference, besides dimensions, is that I must establish the dynamic body's mass properties.</p>
<p>First I create the body using CreateBody. By default bodies are static, so I should set the <code>b2BodyType</code> at creation time to make the body dynamic. I should also use the body definition to put the body at the intended position for simulation. Creating a body then moving it afterwards is very inefficient and may cause lag spikes, especially if many bodies are created at the origin.</p>
<div class="fragment"><div class="line"><a class="code hl_struct" href="group__body.html#structb2_body_def">b2BodyDef</a> bodyDef = <a class="code hl_function" href="group__body.html#ga8f9e64b598f7e50a646fe29a55189441">b2DefaultBodyDef</a>();</div>
<div class="line">bodyDef.<a class="code hl_variable" href="group__body.html#a89cc3ad1873908042b002147b3861381">type</a> = <a class="code hl_enumvalue" href="group__body.html#gga74ddb02261648c2bff691a866b5c03e0a65cfde8d03fe7855d91759842840ef40">b2_dynamicBody</a>;</div>
<div class="line">bodyDef.<a class="code hl_variable" href="group__body.html#a680cadc09ad6cf4b3366cbf0914c648b">position</a> = (<a class="code hl_struct" href="group__math.html#structb2_vec2">b2Vec2</a>){0.0f, 4.0f};</div>
<div class="line"><a class="code hl_struct" href="group__id.html#structb2_body_id">b2BodyId</a> bodyId = <a class="code hl_function" href="group__body.html#gae508148d6b854188a14075edd90c7777">b2CreateBody</a>(worldId, &amp;bodyDef);</div>
<div class="ttc" id="agroup__body_html_a89cc3ad1873908042b002147b3861381"><div class="ttname"><a href="group__body.html#a89cc3ad1873908042b002147b3861381">b2BodyDef::type</a></div><div class="ttdeci">b2BodyType type</div><div class="ttdoc">The body type: static, kinematic, or dynamic.</div><div class="ttdef"><b>Definition</b> types.h:145</div></div>
<div class="ttc" id="agroup__body_html_gga74ddb02261648c2bff691a866b5c03e0a65cfde8d03fe7855d91759842840ef40"><div class="ttname"><a href="group__body.html#gga74ddb02261648c2bff691a866b5c03e0a65cfde8d03fe7855d91759842840ef40">b2_dynamicBody</a></div><div class="ttdeci">@ b2_dynamicBody</div><div class="ttdoc">positive mass, velocity determined by forces, moved by solver</div><div class="ttdef"><b>Definition</b> types.h:131</div></div>
</div><!-- fragment --><blockquote class="doxtable">
<p>&zwj;<b>Caution</b>: You must set the body type to <code>b2_dynamicBody</code> if you want the body to move in response to forces (such as gravity). </p>
</blockquote>
<p>Next I create and attach a polygon shape using a shape definition. First I create another box shape:</p>
<div class="fragment"><div class="line"><a class="code hl_struct" href="group__geometry.html#structb2_polygon">b2Polygon</a> dynamicBox = <a class="code hl_function" href="group__geometry.html#ga9f61df106f05be28e4c66c83a00a0372">b2MakeBox</a>(1.0f, 1.0f);</div>
</div><!-- fragment --><p>Next I create a shape definition for the box. Notice that I set density to 1. The default density is 1, so this is unnecessary. Also, the friction on the shape is set to 0.3.</p>
<div class="fragment"><div class="line"><a class="code hl_struct" href="group__shape.html#structb2_shape_def">b2ShapeDef</a> shapeDef = <a class="code hl_function" href="group__shape.html#ga379508d71c631c83e151415d3683621a">b2DefaultShapeDef</a>();</div>
<div class="line">shapeDef.<a class="code hl_variable" href="group__shape.html#ab0ddf90317622a46ac9cb54e47342b54">density</a> = 1.0f;</div>
<div class="line">shapeDef.<a class="code hl_variable" href="group__shape.html#a602ce17ce0d85dbfb079857e2f95e307">friction</a> = 0.3f;</div>
<div class="ttc" id="agroup__shape_html_a602ce17ce0d85dbfb079857e2f95e307"><div class="ttname"><a href="group__shape.html#a602ce17ce0d85dbfb079857e2f95e307">b2ShapeDef::friction</a></div><div class="ttdeci">float friction</div><div class="ttdoc">The Coulomb (dry) friction coefficient, usually in the range [0,1].</div><div class="ttdef"><b>Definition</b> types.h:306</div></div>
<div class="ttc" id="agroup__shape_html_ab0ddf90317622a46ac9cb54e47342b54"><div class="ttname"><a href="group__shape.html#ab0ddf90317622a46ac9cb54e47342b54">b2ShapeDef::density</a></div><div class="ttdeci">float density</div><div class="ttdoc">The density, usually in kg/m^2.</div><div class="ttdef"><b>Definition</b> types.h:312</div></div>
</div><!-- fragment --><blockquote class="doxtable">
<p>&zwj;<b>Caution</b>: A dynamic body should have at least one shape with a non-zero density. Otherwise you will get strange behavior. </p>
</blockquote>
<p>Using the shape definition I can now create the shape. This automatically updates the mass of the body. You can add as many shapes as you like to a body. Each one contributes to the total mass.</p>
<div class="fragment"><div class="line"><a class="code hl_function" href="group__shape.html#gaad57080193c9c0790857e9d12e56c5ba">b2CreatePolygonShape</a>(bodyId, &amp;shapeDef, &amp;dynamicBox);</div>
</div><!-- fragment --><p>That's it for initialization. We are now ready to begin simulating.</p>
<h1><a class="anchor" id="autotoc_md24"></a>
Simulating the World</h1>
<p>I have initialized the ground box and a dynamic box. Now we are ready to set Newton loose to do his thing. I just have a couple more issues to consider.</p>
<p>Box2D uses a computational algorithm called an integrator. Integrators simulate the physics equations at discrete points of time. This goes along with the traditional game loop where we essentially have a flip book of movement on the screen. So we need to pick a time step for Box2D. Generally physics engines for games like a time step at least as fast as 60Hz or 1/60 seconds. You can get away with larger time steps, but you will have to be more careful about setting up your simulation. It is also not good for the time step to vary from frame to frame. A variable time step produces variable results, which makes it difficult to debug. So don't tie the time step to your frame rate. Without further ado, here is the time step.</p>
<div class="fragment"><div class="line"><span class="keywordtype">float</span> timeStep = 1.0f / 60.0f;</div>
</div><!-- fragment --><p>In addition to the integrator, Box2D also uses a larger bit of code called a constraint solver. The constraint solver solves all the constraints in the simulation, one at a time. A single constraint can be solved perfectly. However, when Box2D solves one constraint, it slightly disrupts other constraints. To get a good solution, Box2D needs to iterate over all constraints a number of times.</p>
<p>Box2D uses sub-stepping as a means of constraint iteration. It lets the simulation move forward in time by small amounts and each constraint gets a chance to react to the changes.</p>
<p>The suggested sub-step count for Box2D is 4. You can tune this number to your liking, just keep in mind that this has a trade-off between performance and accuracy. Using fewer sub-steps increases performance but accuracy suffers. Likewise, using more sub-steps decreases performance but improves the quality of your simulation. For this example, I will use 4 sub-steps.</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> subStepCount = 4;</div>
</div><!-- fragment --><p>Note that the time step and the sub-step count are related. As the time-step decreases, the size of the sub-steps also decreases. For example, at 60Hz time step and 4 sub-steps, the sub-steps operate at 240Hz. With 8 sub-steps the sub-step is 480Hz!</p>
<p>We are now ready to begin the simulation loop. In your game the simulation loop can be merged with your game loop. In each pass through your game loop you call <code><a class="el" href="group__world.html#ga0249cf75273319ca548d55734d7297c4" title="Simulate a world for one time step.">b2World_Step()</a></code>. Just one call is usually enough, depending on your frame rate and your physics time step. I recommend this article <a href="https://gafferongames.com/post/fix_your_timestep/">Fix Your Timestep!</a> to run your game simulation at a fixed rate.</p>
<p>The Hello World test was designed to be simple, so it has no graphical output. The code prints out the position and rotation of the dynamic body. Here is the simulation loop that simulates 90 time steps for a total of 1.5 seconds of simulated time.</p>
<div class="fragment"><div class="line"><span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 90; ++i)</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_function" href="group__world.html#ga0249cf75273319ca548d55734d7297c4">b2World_Step</a>(worldId, timeStep, subStepCount);</div>
<div class="line">    <a class="code hl_struct" href="group__math.html#structb2_vec2">b2Vec2</a> position = <a class="code hl_function" href="group__body.html#gadad9a88fdfad660f0794af5a55a82d16">b2Body_GetPosition</a>(bodyId);</div>
<div class="line">    <span class="keywordtype">float</span> angle = <a class="code hl_function" href="group__body.html#ga09d3ea0dc7e6a7ff6df47659973f2a4d">b2Body_GetAngle</a>(bodyId);</div>
<div class="line">    printf(<span class="stringliteral">&quot;%4.2f %4.2f %4.2f\n&quot;</span>, position.<a class="code hl_variable" href="group__math.html#a7922601d8b8ad0550c2082ebaf74c78a">x</a>, position.y, angle);</div>
<div class="line">}</div>
<div class="ttc" id="agroup__body_html_ga09d3ea0dc7e6a7ff6df47659973f2a4d"><div class="ttname"><a href="group__body.html#ga09d3ea0dc7e6a7ff6df47659973f2a4d">b2Body_GetAngle</a></div><div class="ttdeci">float b2Body_GetAngle(b2BodyId bodyId)</div><div class="ttdoc">Get the body angle in radians in the range [-pi, pi].</div></div>
<div class="ttc" id="agroup__body_html_gadad9a88fdfad660f0794af5a55a82d16"><div class="ttname"><a href="group__body.html#gadad9a88fdfad660f0794af5a55a82d16">b2Body_GetPosition</a></div><div class="ttdeci">b2Vec2 b2Body_GetPosition(b2BodyId bodyId)</div><div class="ttdoc">Get the world position of a body. This is the location of the body origin.</div></div>
<div class="ttc" id="agroup__math_html_a7922601d8b8ad0550c2082ebaf74c78a"><div class="ttname"><a href="group__math.html#a7922601d8b8ad0550c2082ebaf74c78a">b2Vec2::x</a></div><div class="ttdeci">float x</div><div class="ttdoc">coordinates</div><div class="ttdef"><b>Definition</b> math_functions.h:25</div></div>
<div class="ttc" id="agroup__world_html_ga0249cf75273319ca548d55734d7297c4"><div class="ttname"><a href="group__world.html#ga0249cf75273319ca548d55734d7297c4">b2World_Step</a></div><div class="ttdeci">void b2World_Step(b2WorldId worldId, float timeStep, int subStepCount)</div><div class="ttdoc">Simulate a world for one time step.</div></div>
</div><!-- fragment --><p>The output shows the box falling and landing on the ground box. Your output should look like this:</p>
<div class="fragment"><div class="line">0.00 4.00 0.00</div>
<div class="line">0.00 3.99 0.00</div>
<div class="line">0.00 3.98 0.00</div>
<div class="line">...</div>
<div class="line">0.00 1.25 0.00</div>
<div class="line">0.00 1.13 0.00</div>
<div class="line">0.00 1.01 0.00</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md25"></a>
Cleanup</h1>
<p>When you are done with the simulation, you should destroy the world.</p>
<div class="fragment"><div class="line"><a class="code hl_function" href="group__world.html#gab03e6659955d615e0b935aeba7a3cc74">b2DestroyWorld</a>(worldId);</div>
<div class="ttc" id="agroup__world_html_gab03e6659955d615e0b935aeba7a3cc74"><div class="ttname"><a href="group__world.html#gab03e6659955d615e0b935aeba7a3cc74">b2DestroyWorld</a></div><div class="ttdeci">void b2DestroyWorld(b2WorldId worldId)</div><div class="ttdoc">Destroy a world.</div></div>
</div><!-- fragment --><p>This efficiently destroys all bodies, shapes, and joints in the simulation. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
